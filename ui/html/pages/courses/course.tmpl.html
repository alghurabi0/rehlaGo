{{ define "title" }}Course{{ end }} {{ define "main" }}
<div class="view">
  <div class="flex flex-row justify-end items-center md:mr-20">
    <h1 class="mr-2 my-2 text-end text-xl font-bold text-black">
      تفاصيل الدورة
    </h1>
    <svg
      width="20"
      height="20"
      viewBox="0 0 20 20"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
      onclick="history.back()"
    >
      <path
        fill-rule="evenodd"
        clip-rule="evenodd"
        d="M6.91042 15.5894C6.58498 15.264 6.58498 14.7363 6.91042 14.4109L11.3212 10.0002L6.91042 5.58942C6.58498 5.26398 6.58498 4.73634 6.91042 4.41091C7.23586 4.08547 7.76349 4.08547 8.08893 4.41091L13.0889 9.41091C13.4144 9.73634 13.4144 10.264 13.0889 10.5894L8.08893 15.5894C7.76349 15.9149 7.23586 15.9149 6.91042 15.5894Z"
        fill="#202020"
      />
    </svg>
  </div>

  <div
    class="text-md mt-4 grid grid-cols-1 justify-items-center gap-y-4 pb-20 md:pb-0"
  >
    <div
      class="flex max-h-[302px] w-full flex-col items-center justify-between rounded-lg bg-[#E5E5E5E5] shadow-lg md:w-5/6"
    >
      <div
        class="flex h-[147px] w-full flex-col items-end rounded-xl bg-cover bg-no-repeat bg-center px-4 py-2 text-white"
        style="{{ if .Course.Cover }}background-image: url('{{.Course.Cover}}');{{ else }}background-color: #0ea5e9;{{ end }}"
      >
        <h1 class="text-2xl font-bold">{{ .Course.Title }}</h1>
        <div class="mt-2 flex flex-row w-full justify-end">
          <div class="flex flex-row mr-2 text-lg">
            <h2 class="mr-2 font-bold">{{ .Course.Teacher }}</h2>
            <h2>:الاستاذ</h2>
          </div>
          <div
            class="flex w-5 items-center justify-center rounded-full border-2 border-solid border-white"
          >
            <svg
              width="14"
              height="16"
              viewBox="0 0 14 16"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M7 2C5.75736 2 4.75 3.00736 4.75 4.25C4.75 5.49264 5.75736 6.5 7 6.5C8.24264 6.5 9.25 5.49264 9.25 4.25C9.25 3.00736 8.24264 2 7 2ZM3.25 4.25C3.25 2.17893 4.92893 0.5 7 0.5C9.07107 0.5 10.75 2.17893 10.75 4.25C10.75 6.32107 9.07107 8 7 8C4.92893 8 3.25 6.32107 3.25 4.25ZM1.34835 10.5984C2.05161 9.89509 3.00544 9.5 4 9.5H10C10.9946 9.5 11.9484 9.89509 12.6517 10.5984C13.3549 11.3016 13.75 12.2554 13.75 13.25V14.75C13.75 15.1642 13.4142 15.5 13 15.5C12.5858 15.5 12.25 15.1642 12.25 14.75V13.25C12.25 12.6533 12.0129 12.081 11.591 11.659C11.169 11.2371 10.5967 11 10 11H4C3.40326 11 2.83097 11.2371 2.40901 11.659C1.98705 12.081 1.75 12.6533 1.75 13.25V14.75C1.75 15.1642 1.41421 15.5 1 15.5C0.585786 15.5 0.25 15.1642 0.25 14.75V13.25C0.25 12.2554 0.645088 11.3016 1.34835 10.5984Z"
                fill="white"
              />
            </svg>
          </div>
        </div>
        <bdi class="text-sm self mt-2">{{ .Course.Description }}</bdi>
      </div>

      <div class="flex w-full flex-col items-end px-4 py-2 text-black">
        <div class="mt-1 flex flex-row">
          <div class="flex flex-row font-semibold">
            <p class="mr-1">دينار عراقي</p>
            <p class="mr-2">{{ .Course.Price }}</p>
          </div>
          <svg
            width="12"
            height="20"
            viewBox="0 0 12 20"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M6.00033 0C6.46056 0 6.83366 0.373096 6.83366 0.833333V3.33333H10.167C10.6272 3.33333 11.0003 3.70643 11.0003 4.16667C11.0003 4.6269 10.6272 5 10.167 5H6.83366V9.16667H8.08366C9.07822 9.16667 10.032 9.56175 10.7353 10.265C11.4386 10.9683 11.8337 11.9221 11.8337 12.9167C11.8337 13.9112 11.4386 14.8651 10.7353 15.5683C10.032 16.2716 9.07822 16.6667 8.08366 16.6667H6.83366V19.1667C6.83366 19.6269 6.46056 20 6.00033 20C5.54009 20 5.16699 19.6269 5.16699 19.1667V16.6667H1.00033C0.540088 16.6667 0.166992 16.2936 0.166992 15.8333C0.166992 15.3731 0.540088 15 1.00033 15H5.16699V10.8333H3.91699C2.92243 10.8333 1.9686 10.4382 1.26534 9.73498C0.562081 9.03172 0.166992 8.0779 0.166992 7.08333C0.166992 6.08877 0.562081 5.13494 1.26534 4.43168C1.9686 3.72842 2.92243 3.33333 3.91699 3.33333H5.16699V0.833333C5.16699 0.373096 5.54009 0 6.00033 0ZM5.16699 5H3.91699C3.36446 5 2.83455 5.21949 2.44385 5.61019C2.05315 6.00089 1.83366 6.5308 1.83366 7.08333C1.83366 7.63587 2.05315 8.16577 2.44385 8.55647C2.83455 8.94717 3.36446 9.16667 3.91699 9.16667H5.16699V5ZM6.83366 10.8333V15H8.08366C8.63619 15 9.1661 14.7805 9.5568 14.3898C9.9475 13.9991 10.167 13.4692 10.167 12.9167C10.167 12.3641 9.9475 11.8342 9.5568 11.4435C9.1661 11.0528 8.63619 10.8333 8.08366 10.8333H6.83366Z"
              fill="#202020"
            />
          </svg>
        </div>
        {{ if not .IsSubscribed }}
        <button
          class="subButton mt-3 flex h-[48px] w-5/6 flex-row items-center justify-center self-center rounded-xl bg-[#A490BB]"
          _="on click add .flex to #subWindow
             then call #subWindow's showModal()"
        >
          <p class="mr-2 text-lg text-white font-semibold">اشترك في الدورة</p>
          <svg
            width="17"
            height="16"
            viewBox="0 0 17 16"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M14.9374 9.74431L15.0907 8.32348C15.1716 7.56515 15.2257 7.06515 15.1832 6.75015H15.1982C15.4835 6.75007 15.7601 6.65244 15.9822 6.47346C16.2043 6.29449 16.3585 6.04493 16.4193 5.76623C16.48 5.48752 16.4436 5.19643 16.316 4.94129C16.1885 4.68614 15.9775 4.48228 15.7182 4.36356C15.4588 4.24484 15.1667 4.21839 14.8902 4.28862C14.6137 4.35884 14.3696 4.5215 14.1983 4.7496C14.0271 4.9777 13.9389 5.25752 13.9486 5.54259C13.9583 5.82767 14.0652 6.10086 14.2516 6.31681C13.9799 6.48431 13.6249 6.83848 13.0907 7.37098C12.6782 7.78181 12.4724 7.98681 12.2424 8.01848C12.115 8.03607 11.9851 8.01789 11.8674 7.96598C11.6557 7.87265 11.5141 7.61931 11.2316 7.11181L9.73991 4.43765C9.56574 4.12515 9.41991 3.86265 9.28824 3.65265C9.6218 3.48269 9.88842 3.20537 10.0452 2.8654C10.2019 2.52542 10.2396 2.14258 10.1522 1.77856C10.0648 1.41454 9.85739 1.09054 9.56339 0.858779C9.2694 0.627014 8.90594 0.500977 8.53157 0.500977C8.15721 0.500977 7.79375 0.627014 7.49975 0.858779C7.20576 1.09054 6.99835 1.41454 6.91096 1.77856C6.82356 2.14258 6.86127 2.52542 7.018 2.8654C7.17472 3.20537 7.44135 3.48269 7.77491 3.65265C7.64324 3.86348 7.49741 4.12515 7.32241 4.43765L5.83157 7.11181C5.54824 7.61931 5.40657 7.87265 5.19491 7.96598C5.07719 8.01789 4.94736 8.03607 4.81991 8.01848C4.59074 7.98681 4.38491 7.78181 3.97241 7.37098C3.43824 6.83848 3.08324 6.48431 2.81157 6.31681C2.99793 6.10086 3.10483 5.82767 3.11452 5.54259C3.1242 5.25752 3.0361 4.9777 2.86483 4.7496C2.69356 4.5215 2.44942 4.35884 2.17296 4.28862C1.8965 4.21839 1.60433 4.24484 1.34497 4.36356C1.08561 4.48228 0.874651 4.68614 0.747123 4.94129C0.619595 5.19643 0.583166 5.48752 0.643884 5.76623C0.704602 6.04493 0.858816 6.29449 1.08092 6.47346C1.30303 6.65244 1.57966 6.75007 1.86491 6.75015H1.87991C1.83741 7.06515 1.89157 7.56598 1.97241 8.32348L2.12574 9.74431C2.21074 10.5326 2.28074 11.2835 2.36741 11.9585H14.6957C14.7824 11.2835 14.8524 10.5335 14.9374 9.74431ZM7.62491 15.5001H9.43824C11.8016 15.5001 12.9832 15.5001 13.7716 14.7943C14.1157 14.486 14.3332 13.931 14.4907 13.2085H2.57241C2.72991 13.931 2.94741 14.4868 3.29157 14.7943C4.07991 15.5001 5.26157 15.5001 7.62491 15.5001Z"
              fill="#DDB342"
            />
          </svg>
        </button>
        {{ template "subMethods" . }} {{ end }}
      </div>
    </div>

    <div class="mt-2 place-self-end text-lg md:mr-20">
      <button
        id="examTabLink"
        class="tablink mr-3 font-bold"
        _="on click
           if #examTab matches '.flex' and me matches '.activeTab'
           then
           else
            add .hidden to #lecTab
            then remove .flex from #lecTab
            then remove .hidden from #examTab
            then add .flex to #examTab
            then remove .activeTab from #lecTabLink
            then add .activeTab to me"
      >
        الامتحانات
      </button>
      <button
        id="lecTabLink"
        class="tablink font-bold activeTab"
        _="on click if #lecTab matches '.flex' and me matches '.activeTab' then
           else add .hidden to #examTab
           then remove .flex from #examTab
           then remove .hidden from #lecTab
           then add .flex to #lecTab
           then remove .activeTab from #examTabLink
           then add .activeTab to me"
      >
        المحاضرات
      </button>
    </div>
    <div class="w-full md:w-5/6">
      <div
        id="lecTab"
        class="tabcontent bg-[#E5E5E5E5] w-full rounded-xl flex flex-col"
      >
        {{ range .Course.Lecs }} {{ template "lecCard" . }} {{ end }}
      </div>
      <div
        id="examTab"
        class="tabcontent bg-[#E5E5E5E5] w-full rounded-xl flex-col hidden"
      >
        {{ range .Course.Exams}} {{ template "examCard" . }} {{ end }}
      </div>
    </div>
  </div>
</div>
{{ end }} {{ define "lecCard" }}
<div class="flex flex-row justify-between py-4 px-4">
  <div
    class="flex h-8 w-8 cursor-pointer items-center justify-center rounded-full bg-[#A490BB]"
    hx-get="/courses/5zpJwCU9bwi25c82h4Ik/lec/hoSfFdi3BPlGCtkEUZpv"
    hx-select=".view"
    hx-target=".view"
    hx-swap="outerHTML"
    hx-push-url="true"
  >
    <svg
      class="mr-1"
      width="12"
      height="14"
      viewBox="0 0 12 14"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <path
        fill-rule="evenodd"
        clip-rule="evenodd"
        d="M10.9858 13.585C10.7718 13.7018 10.511 13.6925 10.3058 13.5606L0.972504 7.56062C0.781688 7.43796 0.666342 7.22668 0.666342 6.99984C0.666342 6.77299 0.781688 6.56172 0.972504 6.43905L10.3058 0.439052C10.511 0.307177 10.7718 0.297836 10.9858 0.414697C11.1998 0.531557 11.333 0.755967 11.333 0.999838L11.333 12.9998C11.333 13.2437 11.1998 13.4681 10.9858 13.585ZM9.99967 11.7787L9.99967 2.22095L2.56585 6.99984L9.99967 11.7787Z"
        fill="white"
      />
    </svg>
  </div>
  <div
    class="flex flex-row cursor-pointer"
    hx-get="/courses/{{ .CourseId }}/lec/{{ .ID }}"
    hx-select=".view"
    hx-target=".view"
    hx-swap="outerHTML"
    hx-push-url="true"
  >
    <bdi>{{ .Title }}</bdi>
  </div>
</div>
{{ end }} {{ define "examCard" }}
<div class="flex flex-row justify-between py-4 px-4">
  <svg
    class="cursor-pointer"
    hx-get="/courses/{{ .CourseId }}/exam/{{ .ID }}"
    hx-select=".view"
    hx-target=".view"
    hx-swap="outerHTML"
    hx-push-url="true"
    width="30"
    height="30"
    viewBox="0 0 30 30"
    fill="none"
    xmlns="http://www.w3.org/2000/svg"
  >
    <path
      fill-rule="evenodd"
      clip-rule="evenodd"
      d="M14.9997 3.00016C8.37226 3.00016 2.99967 8.37275 2.99967 15.0002C2.99967 21.6276 8.37226 27.0002 14.9997 27.0002C21.6271 27.0002 26.9997 21.6276 26.9997 15.0002C26.9997 8.37275 21.6271 3.00016 14.9997 3.00016ZM0.333008 15.0002C0.333008 6.89999 6.8995 0.333496 14.9997 0.333496C23.0998 0.333496 29.6663 6.89999 29.6663 15.0002C29.6663 23.1003 23.0998 29.6668 14.9997 29.6668C6.8995 29.6668 0.333008 23.1003 0.333008 15.0002ZM14.9997 8.3335C15.7361 8.3335 16.333 8.93045 16.333 9.66683V17.1145L19.3902 14.0574C19.9109 13.5367 20.7551 13.5367 21.2758 14.0574C21.7965 14.5781 21.7965 15.4223 21.2758 15.943L15.9425 21.2763C15.4218 21.797 14.5776 21.797 14.0569 21.2763L8.72353 15.943C8.20283 15.4223 8.20283 14.5781 8.72353 14.0574C9.24423 13.5367 10.0885 13.5367 10.6091 14.0574L13.6663 17.1145V9.66683C13.6663 8.93045 14.2633 8.3335 14.9997 8.3335Z"
      fill="#202020"
    />
  </svg>

  <div
    class="flex flex-row cursor-pointer"
    hx-get="/courses/{{ .CourseId }}/exam/{{ .ID }}"
    hx-select=".view"
    hx-target=".view"
    hx-swap="outerHTML"
    hx-push-url="true"
  >
    <bdi>{{ .Title }}</bdi>
  </div>
</div>
{{ end }}
